<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movecost QGIS Plugin - Vollständige Anleitung</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1000px; margin: 0 auto; padding: 20px; line-height: 1.6; }
        h1 { color: #2c5aa0; border-bottom: 3px solid #2c5aa0; padding-bottom: 10px; }
        h2 { color: #3d7eaa; margin-top: 40px; border-bottom: 1px solid #ddd; padding-bottom: 5px; }
        h3 { color: #555; margin-top: 25px; }
        .function-card { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #2c5aa0; }
        .tutorial { background: #e8f4e8; padding: 20px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #28a745; }
        .warning { background: #fff3cd; padding: 15px; border-radius: 5px; margin: 15px 0; border-left: 4px solid #ffc107; }
        .tip { background: #d1ecf1; padding: 15px; border-radius: 5px; margin: 15px 0; border-left: 4px solid #17a2b8; }
        .param { margin-left: 20px; }
        .param-name { font-weight: bold; color: #2c5aa0; }
        code { background: #e8e8e8; padding: 2px 6px; border-radius: 3px; }
        table { border-collapse: collapse; width: 100%; margin: 15px 0; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        th { background: #2c5aa0; color: white; }
        tr:nth-child(even) { background: #f9f9f9; }
        .step { background: #fff; border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .step-number { background: #2c5aa0; color: white; padding: 5px 12px; border-radius: 50%; font-weight: bold; margin-right: 10px; }
        ul.checklist { list-style: none; padding-left: 0; }
        ul.checklist li:before { content: "✓ "; color: #28a745; font-weight: bold; }
        .toc { background: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>Movecost QGIS Plugin - Vollständige Anleitung</h1>
    <p>Version 2.1 - R-basiertes Werkzeug zur Berechnung von neigungsabhängigen akkumulierten Kostenoberflächen, kostengünstigsten Pfaden und Korridoren im Zusammenhang mit menschlicher Bewegung.</p>

    <div class="toc">
        <h3>Inhaltsverzeichnis</h3>
        <ul>
            <li><a href="#requirements">Voraussetzungen und Einrichtung</a></li>
            <li><a href="#movecost">movecost - Kostenoberfläche</a></li>
            <li><a href="#movebound">movebound - Kostengrenzen</a></li>
            <li><a href="#movecorr">movecorr - Korridore</a></li>
            <li><a href="#movealloc">movealloc - Zuweisung</a></li>
            <li><a href="#movenetw">movenetw - Netzwerke</a></li>
            <li><a href="#moverank">moverank - Rangfolge</a></li>
            <li><a href="#functions">Kostenfunktionen</a></li>
        </ul>
    </div>

    <h2 id="requirements">Voraussetzungen und Einrichtung</h2>

    <div class="warning">
        <strong>Wichtig:</strong> Vor der Verwendung dieses Plugins stellen Sie sicher, dass Sie den Processing R Provider installiert und konfiguriert haben.
    </div>

    <h3>Systemanforderungen</h3>
    <ul class="checklist">
        <li>QGIS 3.0 oder höher (kompatibel mit QGIS 4 und Qt6)</li>
        <li>Processing R Provider Plugin</li>
        <li>R (Version 4.0 oder höher empfohlen)</li>
        <li>R-Pakete: <code>movecost</code> (>= 2.1), <code>sf</code>, <code>terra</code>, <code>raster</code></li>
    </ul>

    <h3>Ersteinrichtung</h3>
    <div class="step"><span class="step-number">1</span> Installieren Sie R von <a href="https://cran.r-project.org/">cran.r-project.org</a></div>
    <div class="step"><span class="step-number">2</span> In QGIS: <strong>Sketches > Sketches verwalten</strong> - installieren Sie "Processing R Provider"</div>
    <div class="step"><span class="step-number">3</span> <strong>Sketches > Optionen > Processing > Provider > R</strong> - konfigurieren Sie den R-Pfad</div>
    <div class="step"><span class="step-number">4</span> Im movecost-Plugin klicken Sie auf <strong>"R-Skripte hinzufügen"</strong></div>
    <div class="step"><span class="step-number">5</span> Das Plugin aktualisiert das movecost-Paket automatisch bei Bedarf</div>

    <h2 id="movecost">movecost - Akkumulierte Kostenoberfläche</h2>

    <div class="function-card">
        <h3>Beschreibung</h3>
        <p>Berechnet die anisotrope akkumulierte Kostenoberfläche von einem Ursprungspunkt unter Berücksichtigung der Neigung. Berechnet auch kostengünstigste Pfade und Isolinien (Isochronen).</p>
        <h4>Anwendungsfälle</h4>
        <ul>
            <li>Optimale Routen zwischen archäologischen Stätten</li>
            <li>Reisezeit oder Energieaufwand</li>
            <li>Isochronenkarten (erreichbare Gebiete in gegebener Zeit)</li>
            <li>Modellierung historischer Bewegungsmuster</li>
        </ul>
    </div>

    <div class="tutorial">
        <h3>Tutorial: Gehzeit zwischen zwei Standorten berechnen</h3>
        <div class="step"><span class="step-number">1</span> <strong>Bereiten Sie Ihre Daten vor:</strong> DGM-Raster, Ursprungspunkte-Layer, Zielpunkte-Layer</div>
        <div class="step"><span class="step-number">2</span> <strong>Klicken Sie auf "movecost"</strong></div>
        <div class="step"><span class="step-number">3</span> <strong>Konfigurieren Sie:</strong> KBS, DGM, Ursprung, Ziel, Funktion='t', Zeit='h'</div>
        <div class="step"><span class="step-number">4</span> <strong>Ausführen</strong> - Sie erhalten: Kostenoberfläche, Isolinien, LCP-Pfade</div>
    </div>

    <h2 id="movebound">movebound - Gehkostengrenzen</h2>

    <div class="function-card">
        <h3>Beschreibung</h3>
        <p>Erstellt Grenzpolygone für Gehkosten um Punktstandorte (z.B. "in 1 Stunde erreichbares Gebiet").</p>
    </div>

    <h2 id="movecorr">movecorr - Kostengünstigste Korridore</h2>

    <div class="function-card">
        <h3>Beschreibung</h3>
        <p>Berechnet den kostengünstigsten Korridor zwischen zwei Punkten - nicht nur den optimalen Pfad, sondern eine Zone ähnlich kostengünstiger Routen.</p>
    </div>

    <div class="tip">
        <strong>Tipp:</strong> Ein enger Korridor zeigt Geländeeinschränkungen an. Breite Korridore deuten auf mehrere alternative Routen hin.
    </div>

    <h2 id="movealloc">movealloc - Kostenzuweisung</h2>

    <div class="function-card">
        <h3>Beschreibung</h3>
        <p>Bei mehreren Ursprüngen wird jede Zelle dem nächsten Ursprung nach Gehkosten zugewiesen (kostenbasierte Voronoi-Polygone).</p>
    </div>

    <h2 id="movenetw">movenetw - Pfadnetzwerke</h2>

    <div class="function-card">
        <h3>Beschreibung</h3>
        <p>Erstellt ein Netzwerk kostengünstigster Pfade zwischen mehreren Standorten. Modus "all-pairs" (alle verbunden) oder "nearest neighbor" (nur nächste Nachbarn).</p>
    </div>

    <h2 id="moverank">moverank - Zielrangfolge</h2>

    <div class="function-card">
        <h3>Beschreibung</h3>
        <p>Berechnet den kostengünstigsten Pfad UND suboptimale Alternativpfade (2., 3., 4. bester Pfad).</p>
    </div>

    <h2 id="functions">Kostenfunktionen</h2>

    <h3>Gehzeit</h3>
    <table>
        <tr><th>Code</th><th>Name</th><th>Beschreibung</th></tr>
        <tr><td><code>t</code></td><td>Tobler (auf dem Weg)</td><td>Klassische Tobler-Funktion. Am häufigsten verwendet.</td></tr>
        <tr><td><code>tofp</code></td><td>Tobler (abseits)</td><td>Für Gehen ohne Wege.</td></tr>
        <tr><td><code>wcs</code></td><td>Kritische Neigung Fahrzeuge</td><td>Für Karren/Radfahrzeuge.</td></tr>
        <tr><td><code>p/pcf</code></td><td>Pandolf</td><td>Metabolische Kosten mit Körpergewicht und Last.</td></tr>
    </table>

    <h2>Fehlerbehebung</h2>
    <div class="warning">
        <ul>
            <li><strong>dgCMatrix-Fehler:</strong> Das Plugin aktualisiert automatisch movecost R >= 2.1</li>
            <li><strong>R nicht gefunden:</strong> Überprüfen Sie Sketches > Optionen > R</li>
            <li><strong>Skripte nicht sichtbar:</strong> Klicken Sie auf "R-Skripte hinzufügen"</li>
        </ul>
    </div>

    <h2>Danksagungen</h2>
    <p><strong>QGIS-Plugin:</strong> Enzo Cocca (adArte srl)</p>
    <p><strong>R-Paket:</strong> Gianmarco Alberti</p>
    <p><strong>Repository:</strong> <a href="https://github.com/enzococca/movecost">github.com/enzococca/movecost</a></p>
</body>
</html>
